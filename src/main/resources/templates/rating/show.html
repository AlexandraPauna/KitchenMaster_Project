<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:javascript="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" th:href="@{/ico/apple-touch-icon-144-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" th:href="@{/ico/apple-touch-icon-114-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" th:href="@{/ico/apple-touch-icon-72-precomposed.png}">
    <link rel="apple-touch-icon-precomposed" th:href="@{/ico/apple-touch-icon-57-precomposed.png}">
    <link rel="shortcut icon" th:href="@{/ico/favicon.png}">

    <link rel="stylesheet" type="text/css" th:href="@{/css/registration.css}"/>
    <title>Kitchen Master</title>
    <!-- Bootstrap core CSS -->
    <link th:href="@{/bootstrap/css/bootstrap.css}" rel="stylesheet">


    <link th:href="@{/css/style.css}" rel="stylesheet">

    <!-- styles needed for carousel slider -->
    <link th:href="@{/plugins/owl-carousel/owl.carousel.css}" rel="stylesheet">
    <link th:href="@{/plugins/owl-carousel/owl.theme.css}" rel="stylesheet">

    <!-- bxSlider CSS file -->
    <link th:href="@{/plugins/bxslider/jquery.bxslider.css}" rel="stylesheet"/>

    <!-- Just for debugging purposes. -->
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- include pace script for automatic web page progress bar  -->
    <script>
        paceOptions = {
            elements: true
        };
    </script>
    <script th:src="@{/js/pace.min.js}"></script>
    <script th:src="@{/plugins/modernizr/modernizr-custom.js}"></script>


</head>
<body>
<div id="wrapper">
    <div th:replace="layout :: header"></div>

    <div class="main-container">
        <div class="container">
            <div class="section-content">
                <div class="inner-box ">
                    <div class="row">


                        <div class="col-sm-6">
                            <div class="seller-info seller-profile">
                                <div class="row">
                                    <!--                                    Imagine recipe-->
                                    <!--                                    <div class="col-md-3">-->
                                    <!--                                        <div class="seller-profile-img">-->
                                    <!--                                            <a><img src="@Url.Action("UserPhotos","Account", new { id = Model.UserId })" class="img-responsive thumbnail" alt="img"> </a>-->
                                    <!--                                        </div>-->
                                    <!--                                    </div>-->
                                    <div class="col-md-9">

                                        <h3 class="no-margin no-padding link-color uppercase "
                                            th:text="${recipe.name}"></h3>

                                        <div class="text-muted"
                                             th:text="'ADDED BY: ' + ${recipe.user.userName} + '(' + ${recipe.user.firstName} + ' ' + ${recipe.user.lastName} + ')'"></div>

                                        <div class="text-muted"
                                             th:text="'SCORE: ' + ${recipe.score}"></div>

                                    </div>
                                </div>

                            </div>


                        </div>


                        <div class="col-sm-6">

                            <div class="seller-contact-info">

                                <h3 class="no-margin uppercase color-danger"> Recipe Information </h3>

                                <dl class="dl-horizontal">
                                    <dt >Calories</dt>
                                    <dd class="contact-sensitive" th:text="${recipe.calories} + ' KCAL'"></dd>

                                    <dt>Servings</dt>
                                    <dd class="contact-sensitive" th:text="${recipe.serving} + ' portions'"></dd>

                                    <dt>Preparation Time</dt>
                                    <dd class="contact-sensitive" th:text="${recipe.preparation_time} + ' min'"></dd>
                                </dl>


                            </div>

                        </div>
                    </div>

                </div>

                <!--                <h3 class="alert alert-danger" role="alert" th:if="${message != ''}" th:text="${message}"></h3>-->

                <div class="section-block">
                    <div class="row">
                        <div class="col-sm-9 col-thin-left page-content ">

                            <div class="category-list">
                                <div class="tab-box ">


                                    <!-- Nav tabs (Ads + Rating) -->
                                    <ul class="nav nav-tabs add-tabs tablist" role="tablist">
                                        <li class="active nav-item">
                                            <a href="#alladslist" role="tab" data-toggle="tab" class="nav-link">Ratings
                                                <span class="badge badge-pill badge-secondary" th:text="${nrRatings}">
                                                </span></a>
                                        </li>
                                    </ul>

                                </div>
                                <!--/.tab-box-->

                                <div class="listing-filter">
                                    <div class="pull-left col-xs-6">
                                    </div>
                                    <div class="pull-right col-xs-6 text-right listing-view-action">
                                        <span class="list-view active"><i class="  icon-th"></i></span> <span class="compact-view"><i class=" icon-th-list  "></i></span> <span class="grid-view "><i class=" icon-th-large "></i></span>
                                    </div>
                                    <div style="clear:both"></div>
                                </div>
                                <!--/.listing-filter-->


                                <div class="tab-content">
                                    <div class="tab-content">
                                        <div class="tab-pane  active " id="alladslist">
                                            <div class="adds-wrapper row no-margin">

                                                <div th:each="rating : ${recipe.ratings}" class="item-list">

                                                    <div class="row">
                                                        <div class="col-md-2 no-padding photobox">
                                                            <div class="add-image">
                                                                <span class="photo-count"></span>
                                                                <img class="thumbnail no-margin"
                                                                     th:src="@{/images/noProfile.png}" alt="img"/>
                                                            </div>
                                                        </div>
                                                        <!--/.photobox-->
                                                        <div class="col-sm-7 add-desc-box">
                                                            <div class="ads-details">
                                                                <h4 class="add-title"
                                                                    th:text="'SCORE: ' + ${rating.score}">
                                                                </h4>
                                                                <h5 class="add-title"
                                                                    th:text="'ADDED BY: ' + ${rating.user.userName}">
                                                                </h5>

                                                                <p class="info-row" th:if="${rating.details != null}">
                                                                    <span style="font-weight:bold">Details: </span></p>
                                                                <p class="info-row" th:text="${rating.details}"></p>
                                                            </div>
                                                        </div>
                                                        <!--/.add-desc-box-->
                                                        <div class="col-md-3 text-right  price-box">
                                                            <a th:if="${rating.user == loggedUser}" class="btn btn-sm btn-info"
                                                               th:href="@{'/rating/edit/' + ${rating.id}}">Edit</a>

                                                        </div>
                                                        <!--/.add-desc-box-->
                                                    </div>
                                                </div>
                                                <!--/.item-list-->

                                            </div>
                                        </div>

                                    </div>

                                </div>

                                <!--/.pagination-bar -->

                                <div class="post-promo text-center">
                                    <h2> Post your favorite Recipe! </h2>
                                    <h5>Post your delicious recipe with us. Make sure you make your chef skills
                                        are acknowledged by everyone!</h5>
                                    <a th:href="@{/recipe/add}"
                                       class="btn btn-lg btn-border btn-post btn-danger">Add Recipe </a>
                                </div>
                                <!--/.post-promo-->

                            </div>
                        </div>

                        <div class="col-md-3  page-sidebar-right">
                            <aside>
                                <div th:if="${isAuth == 'true'} AND ${loggedUser != recipe.user} AND ${ratingAlreadyExists == 'false'}"
                                     class="card sidebar-card card-contact-seller">
                                    <div class="card-header">
                                        Add Rating
                                    </div>
                                    <div class="card-content user-info">
                                        <div class="card-body text-center">
                                            <form method="post"  th:object="${newRating}"
                                                  th:action="@{'/rating/recipe/' + ${recipe.id}}">
                                                <label>Score</label>
                                                <br />
                                                <label th:if="${#fields.hasErrors('score')}" th:errors="*{score}"
                                                       class="validation-message"></label>
                                                <input type="number" required = "required" min = "1" max = "5", step="1"
                                                       class="form-control" th:field="*{score}"/>
                                                <br />

                                                <label>Add details(Optional)</label>
                                                <br />
                                                <label th:if="${#fields.hasErrors('details')}" th:errors="*{details}"
                                                       class="validation-message"></label>
                                                <textarea type="text" class="form-control" rows = 3 minlength="5"
                                                          maxlength="100" required = "required" th:field="*{details}">
                                                </textarea>
                                                <br />

                                                <button class="btn btn-sm btn-success" style="width:100%" type="submit">
                                                    Add</button>
                                            </form>

                                        </div>
                                    </div>
                                </div>

                                <div class="card sidebar-card">
                                    <div class="card-header">How to make your recipe successful?i</div>
                                    <div class="card-content">
                                        <div class="card-body text-left">
                                            <ul class="list-check">
                                                <li> Use a brief title of the recipe</li>
                                                <li> Make sure you post in the correct category</li>
                                                <li> Add nice photos</li>
                                                <li> Check the recipe before publish</li>
                                            </ul>

                                        </div>
                                    </div>
                                </div>
                                <!--/.categories-list-->
                            </aside>
                        </div>
                        <!--/.page-side-bar-->
                    </div>
                </div>


            </div>

        </div>

    </div>
    <!-- /.main-container -->

</div>
<!-- /.wrapper -->


<!-- Le javascript
================================================== -->

<!-- Placed at the end of the document so the pages load faster -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery/jquery-3.3.1.min.js">\x3C/script>')</script>

<script th:src="@{/js/vendors.min.js}"></script>

<!-- include custom script for site  -->
<script th:src="@{/js/main.min.js}"></script>


<!-- include jquery file upload plugin  -->
<script th:src="@{/js/fileinput.min.js}" type="text/javascript"></script>
<script>
    // initialize with defaults
    $("#input-upload-img1").fileinput();
    $("#input-upload-img2").fileinput();
    $("#input-upload-img3").fileinput();
    $("#input-upload-img4").fileinput();
    $("#input-upload-img5").fileinput();
</script>
</body>
</html>
